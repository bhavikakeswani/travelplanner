{% extends "base.html" %}

{% block title %}Explore Destinations - TravelPlanner{% endblock %}
{% block body_class %}explore-page{% endblock %}

{% block content %}
  <div class="dashboard-container">
    <div class="dashboard-card">
      
      <div class="dashboard-header">
        <h2>Explore Destinations</h2>
        <a href="{{url_for('dashboard')}}" class="logout-btn">Back</a>
      </div>

      <div class="input-group" style="margin-bottom: 10px;">
        <i class="bi bi-search"></i>
        <input
          type="text"
          id="searchInput"
          placeholder="Search destinations..."
        >
      </div>

      <!-- No results message -->
      <p id="noResults" style="display:none; margin-bottom: 20px; opacity: 0.7;">
        No destinations found
      </p>

      <div class="trip-summary">
        <h3>Popular Places</h3>
        <div class="trip-cards">

          {% for d in destinations %}
          <a href="{{ url_for('itinerary', city=d.name, image=d.image) }}"
             class="trip-card-link destination-card"
             data-name="{{ d.name | lower }}">
            <div class="trip-card">
              <img src="{{ d.image }}" alt="{{ d.name }}">
              <div class="trip-info">
                <h4>{{ d.name }}</h4>
                <p>{{ d.desc }}</p>
              </div>
            </div>
          </a>
          {% endfor %}

        </div>
      </div>

      <div class="dashboard-actions">
        <a href="{{url_for('create_trip')}}" class="btn">Plan Your Trip</a>
      </div>

      <div class="dashboard-footer">
        Discover, dream & travel ✈️
      </div>

    </div>
  </div>
  
  <script>
    const searchInput = document.getElementById("searchInput");
    const cards = document.querySelectorAll(".destination-card");
    const noResults = document.getElementById("noResults");

    searchInput.addEventListener("input", function () {
      const query = this.value.toLowerCase().trim();
      let visibleCount = 0;

      cards.forEach(card => {
        const name = card.dataset.name;
        const match = name.includes(query);
        card.style.display = match ? "block" : "none";
        if (match) visibleCount++;
      });

      noResults.style.display = visibleCount === 0 ? "block" : "none";
    });
  </script>
{% endblock %}